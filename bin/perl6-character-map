#!/usr/bin/env perl6

use v6.c;

# For quotation marks, things are a little more difficult. As perl 6.c, there's no
# way to introspect the Quote grammar, but since there are plans to make use of
# Unicode's Pi/Pf and Ps/Pe properties, we can list those instead.
# See https://design.perl6.org/v6d.html#Formal_Rules_for_Defining_Matched_Delimiters%2FBrackets
my %unicode-quotes = all-quotes();


# This list is derived from https://docs.perl6.org/language/unicode_texas#Other_acceptable_single_codepoints
my %unicode-chars =
  "Â«" => { texas => '<<',  remarks => 'as part of Â«Â» or .Â«' },
  "Â»" => { texas => '>>',  remarks => 'as part of Â«Â» or .Â»' },
  "Ã—" => { texas => '*' },
  "Ã·" => { texas => '/' },
  "âˆ’" => { texas => '-' },
  "âˆ˜" => { texas => 'o' },
  "â‰…" => { texas => '=~=' },
  "Ï€" => { texas => 'pi',  remarks => '3.14159_26535_89793_238e0' },
  "Ï„" => { texas => 'tau', remarks => '6.28318_53071_79586_476e0' },
  "ð‘’" => { texas => 'e',   remarks => '2.71828_18284_59045_235e0' },
  "âˆž" => { texas => 'Inf' },
  "â€¦" => { texas => '...' },
  "â‡" => { texas => '??' },
  "â€¼" => { texas => '!!' },
  "â€˜" => { texas => "'",   remarks => "as part of â€˜â€™ or â€šâ€™ or â€™â€˜" },
  "â€™" => { texas => "'",   remarks => "as part of â€™â€˜ or â€™â€™" },
  "â€š" => { texas => "'",   remarks => "as part of â€šâ€˜ or â€šâ€™" },
  'â€œ' => { texas => '"',   remarks => 'as part of â€œâ€ or â€žâ€ or â€â€œ' },
  'â€' => { texas => '"',   remarks => 'as part of â€â€œ or â€â€' },
  'â€ž' => { texas => '"',   remarks => 'as part of â€žâ€œ or â€žâ€' },
  "ï½¢" => { texas => 'Q//', remarks => 'as part of ï½¢ï½£' },
  "ï½£" => { texas => 'Q//', remarks => 'as part of ï½¢ï½£' },
  "âº" => { texas => '+ (must use explicit number)', remarks => 'as part of exponentiation' },
  "â»" => { texas => '- (must use explicit number)', remarks => 'as part of exponentiation' },
  "Â¯" => { texas => '- (must use explicit number)', remarks => 'as part of exponentiation (macron is an alternative way of writing a minus)' },
  "â°" => { texas => '**0', remarks => 'can be combined with â°..â¹' },
  "Â¹" => { texas => '**1', remarks => 'can be combined with â°..â¹' },
  "Â²" => { texas => '**2', remarks => 'can be combined with â°..â¹' },
  "Â³" => { texas => '**3', remarks => 'can be combined with â°..â¹' },
  "â´" => { texas => '**4', remarks => 'can be combined with â°..â¹' },
  "âµ" => { texas => '**5', remarks => 'can be combined with â°..â¹' },
  "â¶" => { texas => '**6', remarks => 'can be combined with â°..â¹' },
  "â·" => { texas => '**7', remarks => 'can be combined with â°..â¹' },
  "â¸" => { texas => '**8', remarks => 'can be combined with â°..â¹' },
  "â¹" => { texas => '**9', remarks => 'can be combined with â°..â¹' },
  "âˆ…" => { texas => 'set()' },
  "âˆˆ" => { texas => '(elem)' },
  "âˆ‰" => { texas => '!(elem)' },
  "âˆ‹" => { texas => '(cont)' },
  "âˆŒ" => { texas => '!(cont)' },
  "âŠ†" => { texas => '(<=)' },
  "âŠˆ" => { texas => '!(<=)' },
  "âŠ‚" => { texas => '(<)' },
  "âŠ„" => { texas => '!(<)' },
  "âŠ‡" => { texas => '(>=)' },
  "âŠ‰" => { texas => '!(>=)' },
  "âŠƒ" => { texas => '(>)' },
  "âŠ…" => { texas => '!(>)' },
  "â‰¼" => { texas => '(<+)' },
  "â‰½" => { texas => '(>+)' },
  "âˆª" => { texas => '(|)' },
  "âˆ©" => { texas => '(&)' },
  "âˆ–" => { texas => '(-)' },
  "âŠ–" => { texas => '(^)' },
  "âŠ" => { texas => '(.)' },
  "âŠŽ" => { texas => '(+)' } ;


for $~MAIN.grammar.^methodsÂ».nameÂ {

  .say;
    when /^ < pre in post circum> fix .*? ":sym" [ "<" | "Â«" ] <( .* )> [ ">" | "Â»" ] $ / {
        given $/.Str {

            .say;
        }
    }
}

for $~Quote.grammar.^methodsÂ».nameÂ {

  .say;
    when /^ < pre in post circum> fix .*? ":sym" [ "<" | "Â«" ] <( .* )> [ ">" | "Â»" ] $ / {
        given $/.Str {

            .say;
        }
    }
}

sub all-quotes () returns Hash {
  my %quotes;
  for (0..0x10FFFF).grep: { .uniprop eq "Pi"|"Pf"|"Ps"|"Pe" } -> $ord {
    my $char = $ord.chr;
    %quotes<$char> = { property => sprintf "%s", $char.uniprops };
  }
  return %quotes;
}


# vim: ft=perl6 ts=2 et
